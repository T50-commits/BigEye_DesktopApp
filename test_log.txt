============================= test session starts ==============================
platform darwin -- Python 3.12.4, pytest-9.0.2, pluggy-1.6.0 -- /Users/pongtepchithan/Desktop/iStockMetaData_Database/BigEye_Desktop_App/.venv/bin/python
cachedir: .pytest_cache
PySide6 6.7.0 -- Qt runtime 6.7.0 -- Qt compiled 6.7.0
rootdir: /Users/pongtepchithan/Desktop/iStockMetaData_Database/BigEye_Desktop_App
configfile: pyproject.toml
plugins: anyio-4.12.1, asyncio-1.3.0, qt-4.5.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 838 items

tests/client/test_api_client.py::TestExceptionHierarchy::test_all_errors_extend_api_error PASSED [  0%]
tests/client/test_api_client.py::TestExceptionHierarchy::test_api_error_has_status_code PASSED [  0%]
tests/client/test_api_client.py::TestExceptionHierarchy::test_network_error_defaults PASSED [  0%]
tests/client/test_api_client.py::TestExceptionHierarchy::test_insufficient_credits_error_fields PASSED [  0%]
tests/client/test_api_client.py::TestExceptionHierarchy::test_update_required_error_fields PASSED [  0%]
tests/client/test_api_client.py::TestTokenManagement::test_initial_state_unauthenticated PASSED [  0%]
tests/client/test_api_client.py::TestTokenManagement::test_set_token PASSED [  0%]
tests/client/test_api_client.py::TestTokenManagement::test_clear_token PASSED [  0%]
tests/client/test_api_client.py::TestTokenManagement::test_clear_token_when_not_set PASSED [  1%]
tests/client/test_api_client.py::TestHandleErrors::test_200_returns_json PASSED [  1%]
tests/client/test_api_client.py::TestHandleErrors::test_401_raises_authentication_error PASSED [  1%]
tests/client/test_api_client.py::TestHandleErrors::test_402_raises_insufficient_credits PASSED [  1%]
tests/client/test_api_client.py::TestHandleErrors::test_403_raises_forbidden PASSED [  1%]
tests/client/test_api_client.py::TestHandleErrors::test_409_raises_conflict PASSED [  1%]
tests/client/test_api_client.py::TestHandleErrors::test_426_raises_update_required PASSED [  1%]
tests/client/test_api_client.py::TestHandleErrors::test_429_raises_rate_limit PASSED [  1%]
tests/client/test_api_client.py::TestHandleErrors::test_503_raises_maintenance PASSED [  2%]
tests/client/test_api_client.py::TestHandleErrors::test_500_raises_generic_api_error PASSED [  2%]
tests/client/test_api_client.py::TestHandleErrors::test_no_json_body_uses_status_code_message PASSED [  2%]
tests/client/test_api_client.py::TestNetworkErrors::test_get_connect_error_raises_network_error PASSED [  2%]
tests/client/test_api_client.py::TestNetworkErrors::test_get_timeout_raises_network_error PASSED [  2%]
tests/client/test_api_client.py::TestNetworkErrors::test_post_connect_error_raises_network_error PASSED [  2%]
tests/client/test_api_client.py::TestNetworkErrors::test_post_timeout_raises_network_error PASSED [  2%]
tests/client/test_api_client.py::TestAPIMethods::test_login_sets_token_on_success PASSED [  2%]
tests/client/test_api_client.py::TestAPIMethods::test_register_sets_token_on_success PASSED [  2%]
tests/client/test_api_client.py::TestAPIMethods::test_get_balance_returns_int PASSED [  3%]
tests/client/test_api_client.py::TestAPIMethods::test_get_balance_with_promos PASSED [  3%]
tests/client/test_api_client.py::TestAPIMethods::test_get_history_returns_list PASSED [  3%]
tests/client/test_api_mocked.py::TestNetworkErrors::test_connect_error_raises_network_error PASSED [  3%]
tests/client/test_api_mocked.py::TestNetworkErrors::test_timeout_raises_network_error PASSED [  3%]
tests/client/test_api_mocked.py::TestNetworkErrors::test_network_error_on_post PASSED [  3%]
tests/client/test_api_mocked.py::TestNetworkErrors::test_network_error_message PASSED [  3%]
tests/client/test_api_mocked.py::TestNetworkErrors::test_network_error_status_code_zero PASSED [  3%]
tests/client/test_api_mocked.py::TestErrorMapping::test_401_raises_authentication_error PASSED [  4%]
tests/client/test_api_mocked.py::TestErrorMapping::test_402_raises_insufficient_credits PASSED [  4%]
tests/client/test_api_mocked.py::TestErrorMapping::test_403_raises_forbidden_error PASSED [  4%]
tests/client/test_api_mocked.py::TestErrorMapping::test_409_raises_conflict_error PASSED [  4%]
tests/client/test_api_mocked.py::TestErrorMapping::test_426_raises_update_required PASSED [  4%]
tests/client/test_api_mocked.py::TestErrorMapping::test_429_raises_rate_limit PASSED [  4%]
tests/client/test_api_mocked.py::TestErrorMapping::test_503_raises_maintenance PASSED [  4%]
tests/client/test_api_mocked.py::TestErrorMapping::test_500_raises_generic_api_error PASSED [  4%]
tests/client/test_api_mocked.py::TestErrorMapping::test_exception_hierarchy PASSED [  5%]
tests/client/test_api_mocked.py::TestTokenManagement::test_set_token PASSED [  5%]
tests/client/test_api_mocked.py::TestTokenManagement::test_clear_token PASSED [  5%]
tests/client/test_api_mocked.py::TestTokenManagement::test_login_auto_sets_token PASSED [  5%]
tests/client/test_api_mocked.py::TestTokenManagement::test_register_auto_sets_token PASSED [  5%]
tests/client/test_api_mocked.py::TestTokenManagement::test_not_authenticated_initially PASSED [  5%]
tests/client/test_api_mocked.py::TestAPIMethods::test_get_balance PASSED [  5%]
tests/client/test_api_mocked.py::TestAPIMethods::test_get_balance_with_promos PASSED [  5%]
tests/client/test_api_mocked.py::TestAPIMethods::test_reserve_job PASSED [  5%]
tests/client/test_api_mocked.py::TestAPIMethods::test_finalize_job PASSED [  6%]
tests/client/test_api_mocked.py::TestAPIMethods::test_topup PASSED       [  6%]
tests/client/test_api_mocked.py::TestAPIMethods::test_get_history PASSED [  6%]
tests/client/test_api_mocked.py::TestJobManagerErrorHandling::test_network_error_emits_job_failed PASSED [  6%]
tests/client/test_api_mocked.py::TestJobManagerErrorHandling::test_insufficient_credits_emits_job_failed PASSED [  6%]
tests/client/test_api_mocked.py::TestJobManagerErrorHandling::test_forbidden_error_emits_job_failed PASSED [  6%]
tests/client/test_auth_manager.py::TestHasValidToken::test_no_saved_token PASSED [  6%]
tests/client/test_auth_manager.py::TestHasValidToken::test_expired_token_clears_session PASSED [  6%]
tests/client/test_auth_manager.py::TestHasValidToken::test_valid_token_sets_api_client PASSED [  7%]
tests/client/test_auth_manager.py::TestHasValidToken::test_valid_token_extracts_email PASSED [  7%]
tests/client/test_auth_manager.py::TestLogin::test_login_saves_session PASSED [  7%]
tests/client/test_auth_manager.py::TestLogin::test_login_sets_user_name PASSED [  7%]
tests/client/test_auth_manager.py::TestRegister::test_register_saves_session PASSED [  7%]
tests/client/test_auth_manager.py::TestLogout::test_logout_clears_everything PASSED [  7%]
tests/client/test_auth_manager.py::TestRefreshBalance::test_refresh_balance_returns_int PASSED [  7%]
tests/client/test_auth_manager.py::TestUserNameProperty::test_returns_cached_name PASSED [  7%]
tests/client/test_auth_manager.py::TestUserNameProperty::test_loads_from_keyring_when_empty PASSED [  7%]
tests/client/test_auth_manager.py::TestUserNameProperty::test_returns_empty_when_keyring_empty PASSED [  8%]
tests/client/test_auth_manager.py::TestUserNameProperty::test_returns_empty_on_invalid_json PASSED [  8%]
tests/client/test_auth_manager.py::TestSaveSession::test_no_token_does_not_save PASSED [  8%]
tests/client/test_auth_manager.py::TestSaveSession::test_saves_token_and_user_data PASSED [  8%]
tests/client/test_config.py::TestAppConstants::test_app_name PASSED      [  8%]
tests/client/test_config.py::TestAppConstants::test_app_version_format PASSED [  8%]
tests/client/test_config.py::TestAppConstants::test_api_base_url_has_scheme PASSED [  8%]
tests/client/test_config.py::TestAppConstants::test_credit_refresh_interval_positive PASSED [  8%]
tests/client/test_config.py::TestAppConstants::test_low_credit_threshold_positive PASSED [  9%]
tests/client/test_config.py::TestFileExtensions::test_image_extensions_are_lowercase PASSED [  9%]
tests/client/test_config.py::TestFileExtensions::test_video_extensions_are_lowercase PASSED [  9%]
tests/client/test_config.py::TestFileExtensions::test_all_extensions_is_union PASSED [  9%]
tests/client/test_config.py::TestFileExtensions::test_no_overlap_image_video PASSED [  9%]
tests/client/test_config.py::TestFileExtensions::test_common_image_formats_present PASSED [  9%]
tests/client/test_config.py::TestFileExtensions::test_common_video_formats_present PASSED [  9%]
tests/client/test_config.py::TestPlatformConfig::test_platform_rates_structure PASSED [  9%]
tests/client/test_config.py::TestPlatformConfig::test_istock_rate PASSED [ 10%]
tests/client/test_config.py::TestPlatformConfig::test_adobe_rate PASSED  [ 10%]
tests/client/test_config.py::TestPlatformConfig::test_ai_models_not_empty PASSED [ 10%]
tests/client/test_config.py::TestPlatformConfig::test_keyword_styles_not_empty PASSED [ 10%]
tests/client/test_config.py::TestPlatformConfig::test_platforms_not_empty PASSED [ 10%]
tests/client/test_config.py::TestSliderConfigs::test_keywords_slider PASSED [ 10%]
tests/client/test_config.py::TestSliderConfigs::test_title_length_slider PASSED [ 10%]
tests/client/test_config.py::TestSliderConfigs::test_description_slider PASSED [ 10%]
tests/client/test_config.py::TestCSVColumns::test_istock_photo_columns PASSED [ 10%]
tests/client/test_config.py::TestCSVColumns::test_istock_video_columns PASSED [ 11%]
tests/client/test_config.py::TestCSVColumns::test_adobe_columns PASSED   [ 11%]
tests/client/test_config.py::TestCSVColumns::test_shutterstock_columns PASSED [ 11%]
tests/client/test_config.py::TestGetAssetPath::test_returns_absolute_path PASSED [ 11%]
tests/client/test_config.py::TestGetAssetPath::test_contains_relative_path PASSED [ 11%]
tests/client/test_config.py::TestGetAssetPath::test_dev_mode_uses_project_dir PASSED [ 11%]
tests/client/test_config.py::TestTheme::test_theme_has_required_keys PASSED [ 11%]
tests/client/test_config.py::TestTheme::test_theme_values_are_hex_colors PASSED [ 11%]
tests/client/test_copyright_guard.py::TestInitialization::test_initialize_sets_blacklist PASSED [ 12%]
tests/client/test_copyright_guard.py::TestInitialization::test_empty_guard_not_initialized PASSED [ 12%]
tests/client/test_copyright_guard.py::TestInitialization::test_initialize_lowercases PASSED [ 12%]
tests/client/test_copyright_guard.py::TestInitialization::test_initialize_strips_whitespace PASSED [ 12%]
tests/client/test_copyright_guard.py::TestInitialization::test_initialize_ignores_empty_strings PASSED [ 12%]
tests/client/test_copyright_guard.py::TestInitialization::test_clear PASSED [ 12%]
tests/client/test_copyright_guard.py::TestIsBlacklisted::test_exact_match PASSED [ 12%]
tests/client/test_copyright_guard.py::TestIsBlacklisted::test_case_insensitive PASSED [ 12%]
tests/client/test_copyright_guard.py::TestIsBlacklisted::test_phrase_match PASSED [ 13%]
tests/client/test_copyright_guard.py::TestIsBlacklisted::test_not_blacklisted PASSED [ 13%]
tests/client/test_copyright_guard.py::TestIsBlacklisted::test_partial_word_not_blacklisted PASSED [ 13%]
tests/client/test_copyright_guard.py::TestIsBlacklisted::test_empty_string PASSED [ 13%]
tests/client/test_copyright_guard.py::TestIsBlacklisted::test_empty_guard PASSED [ 13%]
tests/client/test_copyright_guard.py::TestFilterKeywords::test_removes_blacklisted PASSED [ 13%]
tests/client/test_copyright_guard.py::TestFilterKeywords::test_word_boundary_matching PASSED [ 13%]
tests/client/test_copyright_guard.py::TestFilterKeywords::test_empty_blacklist_returns_all PASSED [ 13%]
tests/client/test_copyright_guard.py::TestFilterKeywords::test_empty_keywords PASSED [ 13%]
tests/client/test_copyright_guard.py::TestFilterKeywords::test_multi_word_blacklist_match PASSED [ 14%]
tests/client/test_copyright_guard.py::TestCheckText::test_finds_blacklisted_in_text PASSED [ 14%]
tests/client/test_copyright_guard.py::TestCheckText::test_no_blacklisted_in_text PASSED [ 14%]
tests/client/test_copyright_guard.py::TestCheckText::test_empty_text PASSED [ 14%]
tests/client/test_copyright_guard.py::TestCheckText::test_empty_blacklist PASSED [ 14%]
tests/client/test_copyright_guard.py::TestCheckText::test_case_insensitive_matching PASSED [ 14%]
tests/client/test_copyright_guard.py::TestCleanText::test_replaces_blacklisted_with_asterisks PASSED [ 14%]
tests/client/test_copyright_guard.py::TestCleanText::test_no_blacklisted_returns_original PASSED [ 14%]
tests/client/test_copyright_guard.py::TestCleanText::test_empty_text PASSED [ 15%]
tests/client/test_copyright_guard.py::TestCleanText::test_empty_blacklist PASSED [ 15%]
tests/client/test_copyright_guard.py::TestCleanText::test_multiple_replacements PASSED [ 15%]
tests/client/test_copyright_guard.py::TestCleanText::test_cleans_extra_spaces PASSED [ 15%]
tests/client/test_copyright_guard.py::TestScanResult::test_finds_violations_in_title PASSED [ 15%]
tests/client/test_copyright_guard.py::TestScanResult::test_finds_violations_in_description PASSED [ 15%]
tests/client/test_copyright_guard.py::TestScanResult::test_finds_violations_in_keywords PASSED [ 15%]
tests/client/test_copyright_guard.py::TestScanResult::test_no_violations PASSED [ 15%]
tests/client/test_copyright_guard.py::TestScanResult::test_empty_result PASSED [ 15%]
tests/client/test_copyright_guard.py::TestScanResult::test_violations_in_all_fields PASSED [ 16%]
tests/client/test_credit_calculation.py::TestPlatformRates::test_istock_rates PASSED [ 16%]
tests/client/test_credit_calculation.py::TestPlatformRates::test_adobe_rates PASSED [ 16%]
tests/client/test_credit_calculation.py::TestPlatformRates::test_all_rates_positive PASSED [ 16%]
tests/client/test_credit_calculation.py::TestCostEstimation::test_10_istock_photos PASSED [ 16%]
tests/client/test_credit_calculation.py::TestCostEstimation::test_10_istock_videos PASSED [ 16%]
tests/client/test_credit_calculation.py::TestCostEstimation::test_mixed_istock PASSED [ 16%]
tests/client/test_credit_calculation.py::TestCostEstimation::test_10_adobe_photos PASSED [ 16%]
tests/client/test_credit_calculation.py::TestCostEstimation::test_mixed_adobe PASSED [ 17%]
tests/client/test_credit_calculation.py::TestCostEstimation::test_zero_files PASSED [ 17%]
tests/client/test_credit_calculation.py::TestCostEstimation::test_single_photo PASSED [ 17%]
tests/client/test_credit_calculation.py::TestCostEstimation::test_single_video PASSED [ 17%]
tests/client/test_credit_calculation.py::TestCostEstimation::test_large_batch PASSED [ 17%]
tests/client/test_credit_calculation.py::TestCostEstimation::test_unknown_platform_defaults PASSED [ 17%]
tests/client/test_credit_calculation.py::TestCostEstimation::test_balance_check_sufficient PASSED [ 17%]
tests/client/test_credit_calculation.py::TestCostEstimation::test_balance_check_insufficient PASSED [ 17%]
tests/client/test_credit_calculation.py::TestCostEstimation::test_max_affordable_files PASSED [ 18%]
tests/client/test_credit_calculation.py::TestChargedCalculation::test_all_success_photos PASSED [ 18%]
tests/client/test_credit_calculation.py::TestChargedCalculation::test_mixed_with_failures PASSED [ 18%]
tests/client/test_csv_export_formats.py::TestExportIstock::test_splits_photos_and_videos PASSED [ 18%]
tests/client/test_csv_export_formats.py::TestExportIstock::test_photo_csv_correct_columns PASSED [ 18%]
tests/client/test_csv_export_formats.py::TestExportIstock::test_photo_csv_column_mapping PASSED [ 18%]
tests/client/test_csv_export_formats.py::TestExportIstock::test_video_csv_correct_columns PASSED [ 18%]
tests/client/test_csv_export_formats.py::TestExportIstock::test_video_csv_has_poster_timecode PASSED [ 18%]
tests/client/test_csv_export_formats.py::TestExportIstock::test_video_csv_has_shot_speed PASSED [ 18%]
tests/client/test_csv_export_formats.py::TestExportIstock::test_keywords_comma_separated PASSED [ 19%]
tests/client/test_csv_export_formats.py::TestExportIstock::test_skips_failed_files PASSED [ 19%]
tests/client/test_csv_export_formats.py::TestExportIstock::test_empty_results_no_csv PASSED [ 19%]
tests/client/test_csv_export_formats.py::TestExportIstock::test_all_failed_no_csv PASSED [ 19%]
tests/client/test_csv_export_formats.py::TestExportIstock::test_photos_only_one_csv PASSED [ 19%]
tests/client/test_csv_export_formats.py::TestExportIstock::test_videos_only_one_csv PASSED [ 19%]
tests/client/test_csv_export_formats.py::TestExportAdobe::test_correct_columns PASSED [ 19%]
tests/client/test_csv_export_formats.py::TestExportAdobe::test_column_mapping PASSED [ 19%]
tests/client/test_csv_export_formats.py::TestExportAdobe::test_style_tag_in_filename PASSED [ 20%]
tests/client/test_csv_export_formats.py::TestExportAdobe::test_empty_results PASSED [ 20%]
tests/client/test_csv_export_formats.py::TestExportAdobe::test_data_row_count PASSED [ 20%]
tests/client/test_csv_export_formats.py::TestExportShutterstock::test_correct_columns PASSED [ 20%]
tests/client/test_csv_export_formats.py::TestExportShutterstock::test_default_values PASSED [ 20%]
tests/client/test_csv_export_formats.py::TestExportShutterstock::test_categories_list_joined PASSED [ 20%]
tests/client/test_csv_export_formats.py::TestExportShutterstock::test_description_in_correct_column PASSED [ 20%]
tests/client/test_csv_export_formats.py::TestSpecialCharacters::test_unicode_keywords_in_istock PASSED [ 20%]
tests/client/test_csv_export_formats.py::TestSpecialCharacters::test_embedded_commas_escaped PASSED [ 21%]
tests/client/test_csv_export_formats.py::TestSpecialCharacters::test_embedded_quotes_escaped PASSED [ 21%]
tests/client/test_csv_export_formats.py::TestSpecialCharacters::test_unicode_in_shutterstock PASSED [ 21%]
tests/client/test_csv_export_formats.py::TestSpecialCharacters::test_keywords_as_string_fallback PASSED [ 21%]
tests/client/test_csv_export_formats.py::TestExportForPlatform::test_istock_routing PASSED [ 21%]
tests/client/test_csv_export_formats.py::TestExportForPlatform::test_adobe_shutterstock_routing PASSED [ 21%]
tests/client/test_csv_export_formats.py::TestExportForPlatform::test_case_insensitive_platform PASSED [ 21%]
tests/client/test_csv_export_formats.py::TestExportForPlatform::test_unknown_platform_returns_empty PASSED [ 21%]
tests/client/test_csv_export_formats.py::TestExportForPlatform::test_adobe_keyword_routes PASSED [ 21%]
tests/client/test_csv_exporter.py::TestExportIstock::test_splits_photos_and_videos PASSED [ 22%]
tests/client/test_csv_exporter.py::TestExportIstock::test_photo_csv_columns PASSED [ 22%]
tests/client/test_csv_exporter.py::TestExportIstock::test_video_csv_columns PASSED [ 22%]
tests/client/test_csv_exporter.py::TestExportIstock::test_photo_csv_data_rows PASSED [ 22%]
tests/client/test_csv_exporter.py::TestExportIstock::test_video_csv_has_poster_timecode PASSED [ 22%]
tests/client/test_csv_exporter.py::TestExportIstock::test_skips_failed_files PASSED [ 22%]
tests/client/test_csv_exporter.py::TestExportIstock::test_empty_results_no_csv PASSED [ 22%]
tests/client/test_csv_exporter.py::TestExportIstock::test_all_failed_no_csv PASSED [ 22%]
tests/client/test_csv_exporter.py::TestExportIstock::test_keywords_joined_as_comma_separated PASSED [ 23%]
tests/client/test_csv_exporter.py::TestExportAdobe::test_creates_csv PASSED [ 23%]
tests/client/test_csv_exporter.py::TestExportAdobe::test_correct_columns PASSED [ 23%]
tests/client/test_csv_exporter.py::TestExportAdobe::test_data_rows PASSED [ 23%]
tests/client/test_csv_exporter.py::TestExportAdobe::test_empty_results PASSED [ 23%]
tests/client/test_csv_exporter.py::TestExportAdobe::test_style_tag_in_filename PASSED [ 23%]
tests/client/test_csv_exporter.py::TestExportShutterstock::test_creates_csv PASSED [ 23%]
tests/client/test_csv_exporter.py::TestExportShutterstock::test_correct_columns PASSED [ 23%]
tests/client/test_csv_exporter.py::TestExportShutterstock::test_default_values PASSED [ 23%]
tests/client/test_csv_exporter.py::TestExportShutterstock::test_categories_list_joined PASSED [ 24%]
tests/client/test_csv_exporter.py::TestExportForPlatform::test_istock_routing PASSED [ 24%]
tests/client/test_csv_exporter.py::TestExportForPlatform::test_adobe_shutterstock_routing PASSED [ 24%]
tests/client/test_csv_exporter.py::TestExportForPlatform::test_unknown_platform_returns_empty PASSED [ 24%]
tests/client/test_csv_exporter.py::TestExportForPlatform::test_case_insensitive_platform PASSED [ 24%]
tests/client/test_file_processing.py::TestIsImage::test_all_image_extensions[.bmp] PASSED [ 24%]
tests/client/test_file_processing.py::TestIsImage::test_all_image_extensions[.jpeg] PASSED [ 24%]
tests/client/test_file_processing.py::TestIsImage::test_all_image_extensions[.jpg] PASSED [ 24%]
tests/client/test_file_processing.py::TestIsImage::test_all_image_extensions[.png] PASSED [ 25%]
tests/client/test_file_processing.py::TestIsImage::test_all_image_extensions[.tif] PASSED [ 25%]
tests/client/test_file_processing.py::TestIsImage::test_all_image_extensions[.tiff] PASSED [ 25%]
tests/client/test_file_processing.py::TestIsImage::test_all_image_extensions[.webp] PASSED [ 25%]
tests/client/test_file_processing.py::TestIsImage::test_video_not_image[.avi] PASSED [ 25%]
tests/client/test_file_processing.py::TestIsImage::test_video_not_image[.mkv] PASSED [ 25%]
tests/client/test_file_processing.py::TestIsImage::test_video_not_image[.mov] PASSED [ 25%]
tests/client/test_file_processing.py::TestIsImage::test_video_not_image[.mp4] PASSED [ 25%]
tests/client/test_file_processing.py::TestIsImage::test_video_not_image[.webm] PASSED [ 26%]
tests/client/test_file_processing.py::TestIsImage::test_case_insensitive PASSED [ 26%]
tests/client/test_file_processing.py::TestIsImage::test_unsupported_extension PASSED [ 26%]
tests/client/test_file_processing.py::TestIsImage::test_no_extension PASSED [ 26%]
tests/client/test_file_processing.py::TestIsImage::test_hidden_file PASSED [ 26%]
tests/client/test_file_processing.py::TestIsImage::test_full_path PASSED [ 26%]
tests/client/test_file_processing.py::TestIsVideo::test_all_video_extensions[.avi] PASSED [ 26%]
tests/client/test_file_processing.py::TestIsVideo::test_all_video_extensions[.mkv] PASSED [ 26%]
tests/client/test_file_processing.py::TestIsVideo::test_all_video_extensions[.mov] PASSED [ 26%]
tests/client/test_file_processing.py::TestIsVideo::test_all_video_extensions[.mp4] PASSED [ 27%]
tests/client/test_file_processing.py::TestIsVideo::test_all_video_extensions[.webm] PASSED [ 27%]
tests/client/test_file_processing.py::TestIsVideo::test_image_not_video[.bmp] PASSED [ 27%]
tests/client/test_file_processing.py::TestIsVideo::test_image_not_video[.jpeg] PASSED [ 27%]
tests/client/test_file_processing.py::TestIsVideo::test_image_not_video[.jpg] PASSED [ 27%]
tests/client/test_file_processing.py::TestIsVideo::test_image_not_video[.png] PASSED [ 27%]
tests/client/test_file_processing.py::TestIsVideo::test_image_not_video[.tif] PASSED [ 27%]
tests/client/test_file_processing.py::TestIsVideo::test_image_not_video[.tiff] PASSED [ 27%]
tests/client/test_file_processing.py::TestIsVideo::test_image_not_video[.webp] PASSED [ 28%]
tests/client/test_file_processing.py::TestIsVideo::test_case_insensitive PASSED [ 28%]
tests/client/test_file_processing.py::TestIsVideo::test_unsupported PASSED [ 28%]
tests/client/test_file_processing.py::TestIsSupportedFile::test_all_supported[.avi] PASSED [ 28%]
tests/client/test_file_processing.py::TestIsSupportedFile::test_all_supported[.bmp] PASSED [ 28%]
tests/client/test_file_processing.py::TestIsSupportedFile::test_all_supported[.jpeg] PASSED [ 28%]
tests/client/test_file_processing.py::TestIsSupportedFile::test_all_supported[.jpg] PASSED [ 28%]
tests/client/test_file_processing.py::TestIsSupportedFile::test_all_supported[.mkv] PASSED [ 28%]
tests/client/test_file_processing.py::TestIsSupportedFile::test_all_supported[.mov] PASSED [ 28%]
tests/client/test_file_processing.py::TestIsSupportedFile::test_all_supported[.mp4] PASSED [ 29%]
tests/client/test_file_processing.py::TestIsSupportedFile::test_all_supported[.png] PASSED [ 29%]
tests/client/test_file_processing.py::TestIsSupportedFile::test_all_supported[.tif] PASSED [ 29%]
tests/client/test_file_processing.py::TestIsSupportedFile::test_all_supported[.tiff] PASSED [ 29%]
tests/client/test_file_processing.py::TestIsSupportedFile::test_all_supported[.webm] PASSED [ 29%]
tests/client/test_file_processing.py::TestIsSupportedFile::test_all_supported[.webp] PASSED [ 29%]
tests/client/test_file_processing.py::TestIsSupportedFile::test_unsupported PASSED [ 29%]
tests/client/test_file_processing.py::TestScanFolder::test_scan_with_mixed_files PASSED [ 29%]
tests/client/test_file_processing.py::TestScanFolder::test_scan_returns_absolute_paths PASSED [ 30%]
tests/client/test_file_processing.py::TestScanFolder::test_scan_sorted_alphabetically PASSED [ 30%]
tests/client/test_file_processing.py::TestScanFolder::test_scan_empty_folder PASSED [ 30%]
tests/client/test_file_processing.py::TestScanFolder::test_scan_nonexistent_folder PASSED [ 30%]
tests/client/test_file_processing.py::TestScanFolder::test_scan_none_path PASSED [ 30%]
tests/client/test_file_processing.py::TestScanFolder::test_scan_empty_string PASSED [ 30%]
tests/client/test_file_processing.py::TestScanFolder::test_scan_ignores_subdirectories PASSED [ 30%]
tests/client/test_file_processing.py::TestScanFolder::test_scan_case_insensitive_extensions PASSED [ 30%]
tests/client/test_file_processing.py::TestCountFiles::test_count_mixed PASSED [ 31%]
tests/client/test_file_processing.py::TestCountFiles::test_count_all_images PASSED [ 31%]
tests/client/test_file_processing.py::TestCountFiles::test_count_all_videos PASSED [ 31%]
tests/client/test_file_processing.py::TestCountFiles::test_count_empty PASSED [ 31%]
tests/client/test_file_processing.py::TestCountFiles::test_count_unsupported_ignored PASSED [ 31%]
tests/client/test_file_processing.py::TestFormatNumber::test_small_number PASSED [ 31%]
tests/client/test_file_processing.py::TestFormatNumber::test_thousands PASSED [ 31%]
tests/client/test_file_processing.py::TestFormatNumber::test_millions PASSED [ 31%]
tests/client/test_file_processing.py::TestFormatNumber::test_zero PASSED [ 31%]
tests/client/test_file_processing.py::TestFormatNumber::test_negative PASSED [ 32%]
tests/client/test_file_processing.py::TestTruncatePath::test_short_path_unchanged PASSED [ 32%]
tests/client/test_file_processing.py::TestTruncatePath::test_long_path_truncated PASSED [ 32%]
tests/client/test_file_processing.py::TestTruncatePath::test_custom_max_len PASSED [ 32%]
tests/client/test_gemini_engine.py::TestGeminiError::test_error_has_type_and_retryable PASSED [ 32%]
tests/client/test_gemini_engine.py::TestGeminiError::test_error_default_not_retryable PASSED [ 32%]
tests/client/test_gemini_engine.py::TestGeminiError::test_all_error_types_exist PASSED [ 32%]
tests/client/test_gemini_engine.py::TestClassifyError::test_rate_limit_429 PASSED [ 32%]
tests/client/test_gemini_engine.py::TestClassifyError::test_rate_limit_keyword PASSED [ 33%]
tests/client/test_gemini_engine.py::TestClassifyError::test_resource_exhausted PASSED [ 33%]
tests/client/test_gemini_engine.py::TestClassifyError::test_quota PASSED [ 33%]
tests/client/test_gemini_engine.py::TestClassifyError::test_billing PASSED [ 33%]
tests/client/test_gemini_engine.py::TestClassifyError::test_safety_blocked PASSED [ 33%]
tests/client/test_gemini_engine.py::TestClassifyError::test_safety_harm PASSED [ 33%]
tests/client/test_gemini_engine.py::TestClassifyError::test_timeout PASSED [ 33%]
tests/client/test_gemini_engine.py::TestClassifyError::test_deadline PASSED [ 33%]
tests/client/test_gemini_engine.py::TestClassifyError::test_invalid_api_key PASSED [ 34%]
tests/client/test_gemini_engine.py::TestClassifyError::test_invalid_key_401 PASSED [ 34%]
tests/client/test_gemini_engine.py::TestClassifyError::test_model_not_found PASSED [ 34%]
tests/client/test_gemini_engine.py::TestClassifyError::test_404 PASSED   [ 34%]
tests/client/test_gemini_engine.py::TestClassifyError::test_content_too_large PASSED [ 34%]
tests/client/test_gemini_engine.py::TestClassifyError::test_413 PASSED   [ 34%]
tests/client/test_gemini_engine.py::TestClassifyError::test_unknown_error PASSED [ 34%]
tests/client/test_gemini_engine.py::TestParseJsonResponse::test_parse_clean_json PASSED [ 34%]
tests/client/test_gemini_engine.py::TestParseJsonResponse::test_parse_with_markdown_fences PASSED [ 34%]
tests/client/test_gemini_engine.py::TestParseJsonResponse::test_parse_with_markdown_fences_no_lang PASSED [ 35%]
tests/client/test_gemini_engine.py::TestParseJsonResponse::test_parse_with_leading_text PASSED [ 35%]
tests/client/test_gemini_engine.py::TestParseJsonResponse::test_parse_with_trailing_text PASSED [ 35%]
tests/client/test_gemini_engine.py::TestParseJsonResponse::test_parse_with_whitespace PASSED [ 35%]
tests/client/test_gemini_engine.py::TestParseJsonResponse::test_parse_invalid_json_raises PASSED [ 35%]
tests/client/test_gemini_engine.py::TestParseJsonResponse::test_parse_nested_json PASSED [ 35%]
tests/client/test_gemini_engine.py::TestParseJsonResponse::test_parse_empty_object PASSED [ 35%]
tests/client/test_gemini_engine.py::TestEngineConfiguration::test_initial_state PASSED [ 35%]
tests/client/test_gemini_engine.py::TestEngineConfiguration::test_set_api_key_resets_model PASSED [ 36%]
tests/client/test_gemini_engine.py::TestEngineConfiguration::test_set_model_resets_model PASSED [ 36%]
tests/client/test_gemini_engine.py::TestEngineConfiguration::test_delete_cache_when_no_cache PASSED [ 36%]
tests/client/test_gemini_engine.py::TestEngineConfiguration::test_delete_cache_clears_state PASSED [ 36%]
tests/client/test_gemini_engine.py::TestEngineConfiguration::test_delete_cache_handles_exception PASSED [ 36%]
tests/client/test_gemini_engine.py::TestEngineConfiguration::test_load_image PASSED [ 36%]
tests/client/test_gemini_engine.py::TestEngineConfiguration::test_load_image_unknown_mime PASSED [ 36%]
tests/client/test_gemini_engine.py::TestGetModel::test_creates_model_lazily PASSED [ 36%]
tests/client/test_gemini_engine.py::TestGetModel::test_reuses_existing_model PASSED [ 36%]
tests/client/test_gemini_engine.py::TestGetModel::test_includes_cache_when_set PASSED [ 37%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_image_supported_extensions[.jpg] PASSED [ 37%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_image_supported_extensions[.jpeg] PASSED [ 37%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_image_supported_extensions[.png] PASSED [ 37%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_image_supported_extensions[.tiff] PASSED [ 37%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_image_supported_extensions[.tif] PASSED [ 37%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_image_supported_extensions[.bmp] PASSED [ 37%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_image_supported_extensions[.webp] PASSED [ 37%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_image_rejects_video_extensions[.mp4] PASSED [ 38%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_image_rejects_video_extensions[.mov] PASSED [ 38%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_image_rejects_video_extensions[.avi] PASSED [ 38%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_image_rejects_video_extensions[.mkv] PASSED [ 38%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_image_rejects_video_extensions[.webm] PASSED [ 38%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_image_case_insensitive PASSED [ 38%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_image_unsupported PASSED [ 38%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_video_supported_extensions[.mp4] PASSED [ 38%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_video_supported_extensions[.mov] PASSED [ 39%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_video_supported_extensions[.avi] PASSED [ 39%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_video_supported_extensions[.mkv] PASSED [ 39%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_video_supported_extensions[.webm] PASSED [ 39%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_video_rejects_image_extensions[.jpg] PASSED [ 39%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_video_rejects_image_extensions[.jpeg] PASSED [ 39%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_video_rejects_image_extensions[.png] PASSED [ 39%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_video_case_insensitive PASSED [ 39%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_supported_file_image PASSED [ 39%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_supported_file_video PASSED [ 40%]
tests/client/test_helpers.py::TestFileTypeDetection::test_is_supported_file_unsupported PASSED [ 40%]
tests/client/test_helpers.py::TestScanFolder::test_scan_empty_folder PASSED [ 40%]
tests/client/test_helpers.py::TestScanFolder::test_scan_nonexistent_folder PASSED [ 40%]
tests/client/test_helpers.py::TestScanFolder::test_scan_none_folder PASSED [ 40%]
tests/client/test_helpers.py::TestScanFolder::test_scan_empty_string PASSED [ 40%]
tests/client/test_helpers.py::TestScanFolder::test_scan_finds_supported_files PASSED [ 40%]
tests/client/test_helpers.py::TestScanFolder::test_scan_returns_absolute_paths PASSED [ 40%]
tests/client/test_helpers.py::TestScanFolder::test_scan_returns_sorted PASSED [ 41%]
tests/client/test_helpers.py::TestScanFolder::test_scan_ignores_subdirectories PASSED [ 41%]
tests/client/test_helpers.py::TestCountFiles::test_empty_list PASSED     [ 41%]
tests/client/test_helpers.py::TestCountFiles::test_only_images PASSED    [ 41%]
tests/client/test_helpers.py::TestCountFiles::test_only_videos PASSED    [ 41%]
tests/client/test_helpers.py::TestCountFiles::test_mixed PASSED          [ 41%]
tests/client/test_helpers.py::TestCountFiles::test_unsupported_files_not_counted PASSED [ 41%]
tests/client/test_helpers.py::TestFormatNumber::test_small_number PASSED [ 41%]
tests/client/test_helpers.py::TestFormatNumber::test_thousands PASSED    [ 42%]
tests/client/test_helpers.py::TestFormatNumber::test_millions PASSED     [ 42%]
tests/client/test_helpers.py::TestFormatNumber::test_zero PASSED         [ 42%]
tests/client/test_helpers.py::TestFormatNumber::test_negative PASSED     [ 42%]
tests/client/test_helpers.py::TestTruncatePath::test_short_path_unchanged PASSED [ 42%]
tests/client/test_helpers.py::TestTruncatePath::test_long_path_truncated PASSED [ 42%]
tests/client/test_helpers.py::TestTruncatePath::test_exact_max_len PASSED [ 42%]
tests/client/test_helpers.py::TestTruncatePath::test_very_short_path_with_few_parts PASSED [ 42%]
tests/client/test_integration_workers.py::TestAuthWorkerLogin::test_login_emits_finished_with_token PASSED [ 42%]
tests/client/test_integration_workers.py::TestAuthWorkerLogin::test_login_calls_api_with_correct_args PASSED [ 43%]
tests/client/test_integration_workers.py::TestAuthWorkerLogin::test_login_wrong_password_emits_error PASSED [ 43%]
tests/client/test_integration_workers.py::TestAuthWorkerLogin::test_login_network_error_emits_error PASSED [ 43%]
tests/client/test_integration_workers.py::TestAuthWorkerLogin::test_login_device_mismatch_emits_error PASSED [ 43%]
tests/client/test_integration_workers.py::TestAuthWorkerLogin::test_login_conflict_emits_error PASSED [ 43%]
tests/client/test_integration_workers.py::TestAuthWorkerRegister::test_register_emits_finished_with_token PASSED [ 43%]
tests/client/test_integration_workers.py::TestAuthWorkerRegister::test_register_calls_api_with_correct_args PASSED [ 43%]
tests/client/test_integration_workers.py::TestStartupWorkerBalance::test_balance_loaded_signal_carries_500 PASSED [ 43%]
tests/client/test_integration_workers.py::TestStartupWorkerBalance::test_promos_loaded_signal PASSED [ 44%]
tests/client/test_integration_workers.py::TestStartupWorkerBalance::test_rates_loaded_signal PASSED [ 44%]
tests/client/test_integration_workers.py::TestStartupWorkerBalance::test_finished_signal_always_emitted PASSED [ 44%]
tests/client/test_integration_workers.py::TestStartupWorkerBalance::test_balance_not_emitted_on_network_error PASSED [ 44%]
tests/client/test_integration_workers.py::TestChainedLoginToBalance::test_login_then_balance_check PASSED [ 44%]
tests/client/test_integration_workers.py::TestChainedLoginToBalance::test_login_failure_prevents_balance_check PASSED [ 44%]
tests/client/test_integration_workers.py::TestChainedLoginToBalance::test_register_then_balance_zero PASSED [ 44%]
tests/client/test_journal_manager.py::TestCreateJournal::test_creates_file PASSED [ 44%]
tests/client/test_journal_manager.py::TestCreateJournal::test_correct_content PASSED [ 44%]
tests/client/test_journal_manager.py::TestUpdateProgress::test_increment_success_photo PASSED [ 45%]
tests/client/test_journal_manager.py::TestUpdateProgress::test_increment_failed_video PASSED [ 45%]
tests/client/test_journal_manager.py::TestUpdateProgress::test_multiple_updates PASSED [ 45%]
tests/client/test_journal_manager.py::TestUpdateProgress::test_update_without_journal_does_nothing PASSED [ 45%]
tests/client/test_journal_manager.py::TestReadJournal::test_read_existing PASSED [ 45%]
tests/client/test_journal_manager.py::TestReadJournal::test_read_nonexistent PASSED [ 45%]
tests/client/test_journal_manager.py::TestReadJournal::test_read_corrupted_json PASSED [ 45%]
tests/client/test_journal_manager.py::TestDeleteJournal::test_delete_existing PASSED [ 45%]
tests/client/test_journal_manager.py::TestDeleteJournal::test_delete_nonexistent PASSED [ 46%]
tests/client/test_journal_manager.py::TestRecoverOnStartup::test_no_journal_returns_none PASSED [ 46%]
tests/client/test_journal_manager.py::TestRecoverOnStartup::test_recovery_with_api_client PASSED [ 46%]
tests/client/test_journal_manager.py::TestRecoverOnStartup::test_recovery_api_failure_estimates_refund PASSED [ 46%]
tests/client/test_journal_manager.py::TestRecoverOnStartup::test_recovery_without_api_client PASSED [ 46%]
tests/client/test_journal_manager.py::TestRecoverOnStartup::test_recovery_info_fields PASSED [ 46%]
tests/client/test_keyword_dictionary.py::TestIrregularMap::test_women_to_woman PASSED [ 46%]
tests/client/test_keyword_dictionary.py::TestIrregularMap::test_men_to_man PASSED [ 46%]
tests/client/test_keyword_dictionary.py::TestIrregularMap::test_children_to_child PASSED [ 47%]
tests/client/test_keyword_dictionary.py::TestIrregularMap::test_people_to_person PASSED [ 47%]
tests/client/test_keyword_dictionary.py::TestIrregularMap::test_running_to_run PASSED [ 47%]
tests/client/test_keyword_dictionary.py::TestIrregularMap::test_smiling_to_smile PASSED [ 47%]
tests/client/test_keyword_dictionary.py::TestIrregularMap::test_better_to_good PASSED [ 47%]
tests/client/test_keyword_dictionary.py::TestIrregularMap::test_best_to_good PASSED [ 47%]
tests/client/test_keyword_dictionary.py::TestIrregularMap::test_all_keys_lowercase PASSED [ 47%]
tests/client/test_keyword_dictionary.py::TestIrregularMap::test_all_values_lowercase PASSED [ 47%]
tests/client/test_keyword_dictionary.py::TestGenericBlacklist::test_filler_words_present PASSED [ 47%]
tests/client/test_keyword_dictionary.py::TestGenericBlacklist::test_brand_names_present PASSED [ 48%]
tests/client/test_keyword_dictionary.py::TestGenericBlacklist::test_generic_photo_terms_present PASSED [ 48%]
tests/client/test_keyword_dictionary.py::TestGenericBlacklist::test_social_media_present PASSED [ 48%]
tests/client/test_keyword_dictionary.py::TestClean::test_strip_whitespace PASSED [ 48%]
tests/client/test_keyword_dictionary.py::TestClean::test_strip_quotes PASSED [ 48%]
tests/client/test_keyword_dictionary.py::TestClean::test_remove_leading_trailing_punctuation PASSED [ 48%]
tests/client/test_keyword_dictionary.py::TestClean::test_collapse_internal_whitespace PASSED [ 48%]
tests/client/test_keyword_dictionary.py::TestClean::test_remove_empty PASSED [ 48%]
tests/client/test_keyword_dictionary.py::TestClean::test_remove_single_char PASSED [ 49%]
tests/client/test_keyword_dictionary.py::TestClean::test_non_string_ignored PASSED [ 49%]
tests/client/test_keyword_dictionary.py::TestClean::test_keep_internal_hyphens PASSED [ 49%]
tests/client/test_keyword_dictionary.py::TestStemDedup::test_basic_dedup PASSED [ 49%]
tests/client/test_keyword_dictionary.py::TestStemDedup::test_irregular_map_applied PASSED [ 49%]
tests/client/test_keyword_dictionary.py::TestStemDedup::test_keeps_shortest_form PASSED [ 49%]
tests/client/test_keyword_dictionary.py::TestStemDedup::test_generic_blacklist_filtered PASSED [ 49%]
tests/client/test_keyword_dictionary.py::TestStemDedup::test_different_stems_kept PASSED [ 49%]
tests/client/test_keyword_dictionary.py::TestStemDedup::test_empty_input PASSED [ 50%]
tests/client/test_keyword_dictionary.py::TestFilterBlacklist::test_removes_exact_match PASSED [ 50%]
tests/client/test_keyword_dictionary.py::TestFilterBlacklist::test_removes_phrase_match PASSED [ 50%]
tests/client/test_keyword_dictionary.py::TestFilterBlacklist::test_word_boundary_matching PASSED [ 50%]
tests/client/test_keyword_dictionary.py::TestFilterBlacklist::test_case_insensitive PASSED [ 50%]
tests/client/test_keyword_dictionary.py::TestFilterBlacklist::test_no_blacklist_returns_all PASSED [ 50%]
tests/client/test_keyword_dictionary.py::TestFilterBlacklist::test_multi_word_blacklist PASSED [ 50%]
tests/client/test_keyword_dictionary.py::TestProcessIstock::test_keeps_phrases PASSED [ 50%]
tests/client/test_keyword_dictionary.py::TestProcessIstock::test_case_insensitive_dedup PASSED [ 50%]
tests/client/test_keyword_dictionary.py::TestProcessIstock::test_blacklist_applied PASSED [ 51%]
tests/client/test_keyword_dictionary.py::TestProcessIstock::test_max_count_honored PASSED [ 51%]
tests/client/test_keyword_dictionary.py::TestProcessIstock::test_empty_input PASSED [ 51%]
tests/client/test_keyword_dictionary.py::TestProcessHybrid::test_phrases_first_then_singles PASSED [ 51%]
tests/client/test_keyword_dictionary.py::TestProcessHybrid::test_phrases_title_cased PASSED [ 51%]
tests/client/test_keyword_dictionary.py::TestProcessHybrid::test_singles_title_cased PASSED [ 51%]
tests/client/test_keyword_dictionary.py::TestProcessHybrid::test_stem_dedup_singles PASSED [ 51%]
tests/client/test_keyword_dictionary.py::TestProcessHybrid::test_max_count PASSED [ 51%]
tests/client/test_keyword_dictionary.py::TestProcessHybrid::test_phrase_dedup PASSED [ 52%]
tests/client/test_keyword_dictionary.py::TestProcessSingle::test_explodes_phrases PASSED [ 52%]
tests/client/test_keyword_dictionary.py::TestProcessSingle::test_stem_dedup PASSED [ 52%]
tests/client/test_keyword_dictionary.py::TestProcessSingle::test_blacklist_applied PASSED [ 52%]
tests/client/test_keyword_dictionary.py::TestProcessSingle::test_removes_single_char_words PASSED [ 52%]
tests/client/test_keyword_dictionary.py::TestProcessSingle::test_max_count PASSED [ 52%]
tests/client/test_keyword_dictionary.py::TestCopyrightGuard::test_is_initialized PASSED [ 52%]
tests/client/test_keyword_dictionary.py::TestCopyrightGuard::test_not_initialized_by_default PASSED [ 52%]
tests/client/test_keyword_dictionary.py::TestCopyrightGuard::test_is_blacklisted PASSED [ 52%]
tests/client/test_keyword_dictionary.py::TestCopyrightGuard::test_filter_keywords PASSED [ 53%]
tests/client/test_keyword_dictionary.py::TestCopyrightGuard::test_check_text_finds_violations PASSED [ 53%]
tests/client/test_keyword_dictionary.py::TestCopyrightGuard::test_check_text_no_violations PASSED [ 53%]
tests/client/test_keyword_dictionary.py::TestCopyrightGuard::test_check_text_empty PASSED [ 53%]
tests/client/test_keyword_dictionary.py::TestCopyrightGuard::test_clean_text_replaces_with_asterisks PASSED [ 53%]
tests/client/test_keyword_dictionary.py::TestCopyrightGuard::test_clean_text_no_violations PASSED [ 53%]
tests/client/test_keyword_dictionary.py::TestCopyrightGuard::test_scan_result_all_fields PASSED [ 53%]
tests/client/test_keyword_dictionary.py::TestCopyrightGuard::test_scan_result_no_violations PASSED [ 53%]
tests/client/test_keyword_dictionary.py::TestCopyrightGuard::test_clear PASSED [ 54%]
tests/client/test_keyword_dictionary.py::TestCopyrightGuard::test_multi_word_blacklist_boundary PASSED [ 54%]
tests/client/test_keyword_dictionary.py::TestCopyrightGuard::test_word_boundary_prevents_partial PASSED [ 54%]
tests/client/test_keyword_processor.py::TestClean::test_strips_whitespace PASSED [ 54%]
tests/client/test_keyword_processor.py::TestClean::test_strips_quotes PASSED [ 54%]
tests/client/test_keyword_processor.py::TestClean::test_removes_empty PASSED [ 54%]
tests/client/test_keyword_processor.py::TestClean::test_removes_short_keywords PASSED [ 54%]
tests/client/test_keyword_processor.py::TestClean::test_removes_leading_trailing_punctuation PASSED [ 54%]
tests/client/test_keyword_processor.py::TestClean::test_collapses_internal_whitespace PASSED [ 55%]
tests/client/test_keyword_processor.py::TestClean::test_skips_non_string PASSED [ 55%]
tests/client/test_keyword_processor.py::TestDedupCaseInsensitive::test_removes_duplicates PASSED [ 55%]
tests/client/test_keyword_processor.py::TestDedupCaseInsensitive::test_preserves_first_occurrence PASSED [ 55%]
tests/client/test_keyword_processor.py::TestDedupCaseInsensitive::test_no_duplicates PASSED [ 55%]
tests/client/test_keyword_processor.py::TestDedupCaseInsensitive::test_empty_list PASSED [ 55%]
tests/client/test_keyword_processor.py::TestStemDedup::test_dedup_by_stem PASSED [ 55%]
tests/client/test_keyword_processor.py::TestStemDedup::test_irregular_map_applied PASSED [ 55%]
tests/client/test_keyword_processor.py::TestStemDedup::test_generic_blacklist_filtered PASSED [ 55%]
tests/client/test_keyword_processor.py::TestStemDedup::test_keeps_shortest_form PASSED [ 56%]
tests/client/test_keyword_processor.py::TestStemDedup::test_empty_list PASSED [ 56%]
tests/client/test_keyword_processor.py::TestStemDedup::test_fallback_without_nltk PASSED [ 56%]
tests/client/test_keyword_processor.py::TestFilterBlacklist::test_no_blacklist_returns_all PASSED [ 56%]
tests/client/test_keyword_processor.py::TestFilterBlacklist::test_filters_exact_match PASSED [ 56%]
tests/client/test_keyword_processor.py::TestFilterBlacklist::test_filters_phrase_match PASSED [ 56%]
tests/client/test_keyword_processor.py::TestFilterBlacklist::test_word_boundary_matching PASSED [ 56%]
tests/client/test_keyword_processor.py::TestFilterBlacklist::test_case_insensitive PASSED [ 56%]
tests/client/test_keyword_processor.py::TestProcessIstock::test_basic_pipeline PASSED [ 57%]
tests/client/test_keyword_processor.py::TestProcessIstock::test_preserves_phrases PASSED [ 57%]
tests/client/test_keyword_processor.py::TestProcessIstock::test_respects_max_count PASSED [ 57%]
tests/client/test_keyword_processor.py::TestProcessIstock::test_with_blacklist PASSED [ 57%]
tests/client/test_keyword_processor.py::TestProcessHybrid::test_phrases_come_first PASSED [ 57%]
tests/client/test_keyword_processor.py::TestProcessHybrid::test_phrases_title_cased PASSED [ 57%]
tests/client/test_keyword_processor.py::TestProcessHybrid::test_singles_stem_deduped PASSED [ 57%]
tests/client/test_keyword_processor.py::TestProcessHybrid::test_respects_max_count PASSED [ 57%]
tests/client/test_keyword_processor.py::TestProcessHybrid::test_dedup_phrases_case_insensitive PASSED [ 57%]
tests/client/test_keyword_processor.py::TestProcessSingle::test_explodes_phrases PASSED [ 58%]
tests/client/test_keyword_processor.py::TestProcessSingle::test_stem_dedup PASSED [ 58%]
tests/client/test_keyword_processor.py::TestProcessSingle::test_filters_short_words PASSED [ 58%]
tests/client/test_keyword_processor.py::TestProcessSingle::test_respects_max_count PASSED [ 58%]
tests/client/test_keyword_processor.py::TestProcessSingle::test_with_blacklist PASSED [ 58%]
tests/client/test_keyword_processor.py::TestSetBlacklist::test_set_blacklist_lowercases PASSED [ 58%]
tests/client/test_keyword_processor.py::TestSetBlacklist::test_set_blacklist_ignores_empty PASSED [ 58%]
tests/client/test_retry_logic.py::TestClassifyError::test_429_rate_limit PASSED [ 58%]
tests/client/test_retry_logic.py::TestClassifyError::test_rate_limit_keyword PASSED [ 59%]
tests/client/test_retry_logic.py::TestClassifyError::test_resource_exhausted PASSED [ 59%]
tests/client/test_retry_logic.py::TestClassifyError::test_quota_exceeded PASSED [ 59%]
tests/client/test_retry_logic.py::TestClassifyError::test_billing_error PASSED [ 59%]
tests/client/test_retry_logic.py::TestClassifyError::test_safety_blocked PASSED [ 59%]
tests/client/test_retry_logic.py::TestClassifyError::test_harm_content PASSED [ 59%]
tests/client/test_retry_logic.py::TestClassifyError::test_timeout PASSED [ 59%]
tests/client/test_retry_logic.py::TestClassifyError::test_deadline_exceeded PASSED [ 59%]
tests/client/test_retry_logic.py::TestClassifyError::test_api_key_invalid PASSED [ 60%]
tests/client/test_retry_logic.py::TestClassifyError::test_401_unauthorized PASSED [ 60%]
tests/client/test_retry_logic.py::TestClassifyError::test_model_not_found PASSED [ 60%]
tests/client/test_retry_logic.py::TestClassifyError::test_404_not_found PASSED [ 60%]
tests/client/test_retry_logic.py::TestClassifyError::test_payload_too_large PASSED [ 60%]
tests/client/test_retry_logic.py::TestClassifyError::test_413_entity_too_large PASSED [ 60%]
tests/client/test_retry_logic.py::TestClassifyError::test_unknown_error PASSED [ 60%]
tests/client/test_retry_logic.py::TestGeminiError::test_error_attributes PASSED [ 60%]
tests/client/test_retry_logic.py::TestGeminiError::test_default_not_retryable PASSED [ 60%]
tests/client/test_retry_logic.py::TestGeminiError::test_is_exception PASSED [ 61%]
tests/client/test_retry_logic.py::TestGeminiError::test_all_error_types PASSED [ 61%]
tests/client/test_retry_logic.py::TestGenerateWithRetry::test_success_on_first_attempt PASSED [ 61%]
tests/client/test_retry_logic.py::TestGenerateWithRetry::test_retries_on_rate_limit PASSED [ 61%]
tests/client/test_retry_logic.py::TestGenerateWithRetry::test_retries_on_timeout PASSED [ 61%]
tests/client/test_retry_logic.py::TestGenerateWithRetry::test_no_retry_on_safety PASSED [ 61%]
tests/client/test_retry_logic.py::TestGenerateWithRetry::test_no_retry_on_invalid_key PASSED [ 61%]
tests/client/test_retry_logic.py::TestGenerateWithRetry::test_no_retry_on_quota PASSED [ 61%]
tests/client/test_retry_logic.py::TestGenerateWithRetry::test_max_retries_exhausted PASSED [ 62%]
tests/client/test_retry_logic.py::TestGenerateWithRetry::test_exponential_backoff PASSED [ 62%]
tests/client/test_retry_logic.py::TestGenerateWithRetry::test_safety_blocked_no_candidates PASSED [ 62%]
tests/client/test_retry_logic.py::TestGenerateWithRetry::test_already_classified_error_not_wrapped PASSED [ 62%]
tests/client/test_retry_logic.py::TestParseJsonResponse::test_clean_json PASSED [ 62%]
tests/client/test_retry_logic.py::TestParseJsonResponse::test_markdown_json_fence PASSED [ 62%]
tests/client/test_retry_logic.py::TestParseJsonResponse::test_markdown_plain_fence PASSED [ 62%]
tests/client/test_retry_logic.py::TestParseJsonResponse::test_leading_text PASSED [ 62%]
tests/client/test_retry_logic.py::TestParseJsonResponse::test_trailing_text PASSED [ 63%]
tests/client/test_retry_logic.py::TestParseJsonResponse::test_whitespace PASSED [ 63%]
tests/client/test_retry_logic.py::TestParseJsonResponse::test_invalid_json_raises PASSED [ 63%]
tests/client/test_retry_logic.py::TestParseJsonResponse::test_empty_object PASSED [ 63%]
tests/client/test_retry_logic.py::TestParseJsonResponse::test_nested_json PASSED [ 63%]
tests/client/test_retry_logic.py::TestParseJsonResponse::test_unicode_in_json PASSED [ 63%]
tests/client/test_security.py::TestGetHardwareId::test_returns_32_char_hex PASSED [ 63%]
tests/client/test_security.py::TestGetHardwareId::test_deterministic PASSED [ 63%]
tests/client/test_security.py::TestGetHardwareId::test_fallback_on_exception PASSED [ 63%]
tests/client/test_security.py::TestClientAES::test_encrypt_decrypt_roundtrip PASSED [ 64%]
tests/client/test_security.py::TestClientAES::test_encrypt_produces_base64 PASSED [ 64%]
tests/client/test_security.py::TestClientAES::test_decrypt_hex_format PASSED [ 64%]
tests/client/test_security.py::TestClientAES::test_decrypt_base64_format PASSED [ 64%]
tests/client/test_security.py::TestClientAES::test_decrypt_too_short_raises PASSED [ 64%]
tests/client/test_security.py::TestClientAES::test_decrypt_bad_ciphertext_length_raises PASSED [ 64%]
tests/client/test_security.py::TestClientAES::test_roundtrip_unicode PASSED [ 64%]
tests/client/test_security.py::TestClientAES::test_roundtrip_empty_string PASSED [ 64%]
tests/client/test_security.py::TestClientAES::test_different_ciphertext_each_time PASSED [ 65%]
tests/client/test_security.py::TestClientAES::test_cross_compatibility_server_client PASSED [ 65%]
tests/client/test_security.py::TestKeyringHelpers::test_save_to_keyring_success PASSED [ 65%]
tests/client/test_security.py::TestKeyringHelpers::test_save_to_keyring_failure PASSED [ 65%]
tests/client/test_security.py::TestKeyringHelpers::test_load_from_keyring_success PASSED [ 65%]
tests/client/test_security.py::TestKeyringHelpers::test_load_from_keyring_not_found PASSED [ 65%]
tests/client/test_security.py::TestKeyringHelpers::test_load_from_keyring_failure PASSED [ 65%]
tests/client/test_security.py::TestKeyringHelpers::test_delete_from_keyring_success PASSED [ 65%]
tests/client/test_security.py::TestKeyringHelpers::test_delete_from_keyring_failure PASSED [ 65%]
tests/client/test_security.py::TestDecodeJwtPayload::test_decode_valid_jwt PASSED [ 66%]
tests/client/test_security.py::TestDecodeJwtPayload::test_decode_invalid_format PASSED [ 66%]
tests/client/test_security.py::TestDecodeJwtPayload::test_decode_invalid_base64 PASSED [ 66%]
tests/client/test_security.py::TestDecodeJwtPayload::test_decode_with_padding PASSED [ 66%]
tests/client/test_security.py::TestIsTokenExpired::test_valid_token_not_expired PASSED [ 66%]
tests/client/test_security.py::TestIsTokenExpired::test_expired_token PASSED [ 66%]
tests/client/test_security.py::TestIsTokenExpired::test_no_exp_claim PASSED [ 66%]
tests/client/test_security.py::TestIsTokenExpired::test_invalid_token PASSED [ 66%]
tests/client/test_security.py::TestIsTokenExpired::test_empty_token PASSED [ 67%]
tests/client/test_signals.py::TestQueueManagerSignals::test_file_completed_signal PASSED [ 67%]
tests/client/test_signals.py::TestQueueManagerSignals::test_progress_updated_signal PASSED [ 67%]
tests/client/test_signals.py::TestQueueManagerSignals::test_all_completed_signal PASSED [ 67%]
tests/client/test_signals.py::TestQueueManagerSignals::test_file_completed_on_error PASSED [ 67%]
tests/client/test_signals.py::TestQueueManagerSignals::test_stop_sets_flag PASSED [ 67%]
tests/client/test_signals.py::TestQueueManagerSignals::test_reset_clears_state PASSED [ 67%]
tests/client/test_signals.py::TestQueueManagerSignals::test_set_concurrency PASSED [ 67%]
tests/client/test_signals.py::TestQueueManagerSignals::test_stopped_workers_emit_skipped PASSED [ 68%]
tests/client/test_signals.py::TestFileWorkerSignals::test_worker_emits_on_success PASSED [ 68%]
tests/client/test_signals.py::TestFileWorkerSignals::test_worker_emits_on_exception PASSED [ 68%]
tests/client/test_signals.py::TestFileWorkerSignals::test_worker_emits_skipped_when_stopped PASSED [ 68%]
tests/client/test_signals.py::TestFileWorkerSignals::test_worker_releases_semaphore PASSED [ 68%]
tests/client/test_signals.py::TestJobManagerSignals::test_job_failed_on_network_error PASSED [ 68%]
tests/client/test_signals.py::TestJobManagerSignals::test_job_failed_on_api_error PASSED [ 68%]
tests/client/test_signals.py::TestJobManagerSignals::test_job_failed_on_generic_exception PASSED [ 68%]
tests/client/test_signals.py::TestJobManagerSignals::test_credit_updated_on_finalize PASSED [ 68%]
tests/client/test_signals.py::TestJobManagerSignals::test_job_completed_emits_summary PASSED [ 69%]
tests/client/test_signals.py::TestJobManagerSignals::test_stop_job_sets_not_running PASSED [ 69%]
tests/server/test_api_auth.py::TestRegister::test_register_happy_path PASSED [ 69%]
tests/server/test_api_auth.py::TestRegister::test_register_creates_audit_log PASSED [ 69%]
tests/server/test_api_auth.py::TestRegister::test_register_duplicate_email_409 PASSED [ 69%]
tests/server/test_api_auth.py::TestRegister::test_register_email_case_insensitive PASSED [ 69%]
tests/server/test_api_auth.py::TestRegister::test_register_password_too_short_422 PASSED [ 69%]
tests/server/test_api_auth.py::TestRegister::test_register_hardware_id_too_short_422 PASSED [ 69%]
tests/server/test_api_auth.py::TestRegister::test_register_invalid_email_422 PASSED [ 70%]
tests/server/test_api_auth.py::TestRegister::test_register_missing_full_name_422 PASSED [ 70%]
tests/server/test_api_auth.py::TestRegister::test_register_optional_fields PASSED [ 70%]
tests/server/test_api_auth.py::TestRegister::test_register_with_phone_and_os PASSED [ 70%]
tests/server/test_api_auth.py::TestLogin::test_login_happy_path PASSED   [ 70%]
tests/server/test_api_auth.py::TestLogin::test_login_wrong_password_401 PASSED [ 70%]
tests/server/test_api_auth.py::TestLogin::test_login_nonexistent_email_401 PASSED [ 70%]
tests/server/test_api_auth.py::TestLogin::test_login_banned_user_403 PASSED [ 70%]
tests/server/test_api_auth.py::TestLogin::test_login_device_mismatch_403 PASSED [ 71%]
tests/server/test_api_auth.py::TestLogin::test_login_creates_audit_on_wrong_password PASSED [ 71%]
tests/server/test_api_auth.py::TestLogin::test_login_creates_audit_on_device_mismatch PASSED [ 71%]
tests/server/test_api_auth.py::TestLogin::test_login_updates_last_login PASSED [ 71%]
tests/server/test_api_auth.py::TestLogin::test_login_with_app_version PASSED [ 71%]
tests/server/test_api_auth.py::TestLogin::test_login_email_case_insensitive PASSED [ 71%]
tests/server/test_api_auth.py::TestJWTValidation::test_no_token_returns_403 PASSED [ 71%]
tests/server/test_api_auth.py::TestJWTValidation::test_invalid_token_returns_401 PASSED [ 71%]
tests/server/test_api_auth.py::TestJWTValidation::test_expired_token_returns_401 PASSED [ 71%]
tests/server/test_api_auth.py::TestJWTValidation::test_token_for_deleted_user_returns_401 PASSED [ 72%]
tests/server/test_api_auth.py::TestJWTValidation::test_token_for_banned_user_returns_403 PASSED [ 72%]
tests/server/test_api_credit.py::TestGetBalance::test_balance_happy_path PASSED [ 72%]
tests/server/test_api_credit.py::TestGetBalance::test_balance_without_app_settings PASSED [ 72%]
tests/server/test_api_credit.py::TestGetBalance::test_balance_includes_active_promos PASSED [ 72%]
tests/server/test_api_credit.py::TestGetBalance::test_balance_excludes_code_only_promos PASSED [ 72%]
tests/server/test_api_credit.py::TestGetBalance::test_balance_no_auth_403 PASSED [ 72%]
tests/server/test_api_credit.py::TestGetBalance::test_balance_zero_credits PASSED [ 72%]
tests/server/test_api_credit.py::TestGetHistory::test_history_empty PASSED [ 73%]
tests/server/test_api_credit.py::TestGetHistory::test_history_with_transactions PASSED [ 73%]
tests/server/test_api_credit.py::TestGetHistory::test_history_limit_param PASSED [ 73%]
tests/server/test_api_credit.py::TestGetHistory::test_history_does_not_leak_other_users PASSED [ 73%]
tests/server/test_api_credit.py::TestTopUp::test_topup_happy_path PASSED [ 73%]
tests/server/test_api_credit.py::TestTopUp::test_topup_creates_slip_record PASSED [ 73%]
tests/server/test_api_credit.py::TestTopUp::test_topup_creates_transaction PASSED [ 73%]
tests/server/test_api_credit.py::TestTopUp::test_topup_creates_audit_log PASSED [ 73%]
tests/server/test_api_credit.py::TestTopUp::test_topup_amount_zero_422 PASSED [ 73%]
tests/server/test_api_credit.py::TestTopUp::test_topup_amount_negative_422 PASSED [ 74%]
tests/server/test_api_credit.py::TestTopUp::test_topup_missing_slip_422 PASSED [ 74%]
tests/server/test_api_credit.py::TestTopUp::test_topup_no_auth_403 PASSED [ 74%]
tests/server/test_api_credit.py::TestTopUp::test_topup_with_promo_code PASSED [ 74%]
tests/server/test_api_credit.py::TestTopUp::test_topup_with_wrong_promo_code_no_bonus PASSED [ 74%]
tests/server/test_api_credit.py::TestTopUp::test_topup_auto_promo_no_code_needed PASSED [ 74%]
tests/server/test_api_credit.py::TestTopUp::test_topup_updates_user_credits PASSED [ 74%]
tests/server/test_api_credit.py::TestTopUp::test_topup_updates_total_topup_baht PASSED [ 74%]
tests/server/test_api_job.py::TestReserveJob::test_reserve_happy_path_istock PASSED [ 75%]
tests/server/test_api_job.py::TestReserveJob::test_reserve_happy_path_adobe PASSED [ 75%]
tests/server/test_api_job.py::TestReserveJob::test_reserve_with_photo_video_breakdown PASSED [ 75%]
tests/server/test_api_job.py::TestReserveJob::test_reserve_insufficient_credits_402 PASSED [ 75%]
tests/server/test_api_job.py::TestReserveJob::test_reserve_exactly_enough_credits PASSED [ 75%]
tests/server/test_api_job.py::TestReserveJob::test_reserve_banned_user_403 PASSED [ 75%]
tests/server/test_api_job.py::TestReserveJob::test_reserve_inactive_user_403 PASSED [ 75%]
tests/server/test_api_job.py::TestReserveJob::test_reserve_no_auth_403 PASSED [ 75%]
tests/server/test_api_job.py::TestReserveJob::test_reserve_file_count_zero_422 PASSED [ 76%]
tests/server/test_api_job.py::TestReserveJob::test_reserve_creates_job_document PASSED [ 76%]
tests/server/test_api_job.py::TestReserveJob::test_reserve_creates_transaction PASSED [ 76%]
tests/server/test_api_job.py::TestReserveJob::test_reserve_creates_audit_log PASSED [ 76%]
tests/server/test_api_job.py::TestReserveJob::test_reserve_prompt_selection_istock PASSED [ 76%]
tests/server/test_api_job.py::TestReserveJob::test_reserve_prompt_selection_hybrid PASSED [ 76%]
tests/server/test_api_job.py::TestReserveJob::test_reserve_prompt_selection_single PASSED [ 76%]
tests/server/test_api_job.py::TestReserveJob::test_reserve_no_dictionary_for_adobe PASSED [ 76%]
tests/server/test_api_job.py::TestReserveJob::test_reserve_multiple_jobs PASSED [ 76%]
tests/server/test_api_job.py::TestFinalizeJob::test_finalize_all_success_zero_refund PASSED [ 77%]
tests/server/test_api_job.py::TestFinalizeJob::test_finalize_all_failed_full_refund PASSED [ 77%]
tests/server/test_api_job.py::TestFinalizeJob::test_finalize_partial_success PASSED [ 77%]
tests/server/test_api_job.py::TestFinalizeJob::test_finalize_partial_processing PASSED [ 77%]
tests/server/test_api_job.py::TestFinalizeJob::test_finalize_creates_refund_transaction PASSED [ 77%]
tests/server/test_api_job.py::TestFinalizeJob::test_finalize_updates_job_status PASSED [ 77%]
tests/server/test_api_job.py::TestFinalizeJob::test_finalize_creates_audit_log PASSED [ 77%]
tests/server/test_api_job.py::TestFinalizeJob::test_finalize_overclaim_total_400 PASSED [ 77%]
tests/server/test_api_job.py::TestFinalizeJob::test_finalize_overclaim_success_400 PASSED [ 78%]
tests/server/test_api_job.py::TestFinalizeJob::test_finalize_job_not_found_404 PASSED [ 78%]
tests/server/test_api_job.py::TestFinalizeJob::test_finalize_already_completed_returns_existing PASSED [ 78%]
tests/server/test_api_job.py::TestFinalizeJob::test_finalize_no_auth_403 PASSED [ 78%]
tests/server/test_api_job.py::TestFinalizeJob::test_finalize_zero_success_zero_failed PASSED [ 78%]
tests/server/test_api_job.py::TestFinalizeJob::test_finalize_updates_total_credits_used PASSED [ 78%]
tests/server/test_api_job.py::TestReserveRefundCycle::test_full_cycle_balance_consistency PASSED [ 78%]
tests/server/test_api_job.py::TestReserveRefundCycle::test_multiple_jobs_balance_tracking PASSED [ 78%]
tests/server/test_api_system.py::TestHealth::test_health_returns_ok PASSED [ 78%]
tests/server/test_api_system.py::TestHealth::test_health_no_auth_required PASSED [ 79%]
tests/server/test_api_system.py::TestCheckUpdate::test_no_config_returns_defaults PASSED [ 79%]
tests/server/test_api_system.py::TestCheckUpdate::test_update_available PASSED [ 79%]
tests/server/test_api_system.py::TestCheckUpdate::test_no_update_when_current PASSED [ 79%]
tests/server/test_api_system.py::TestCheckUpdate::test_force_update_below_threshold PASSED [ 79%]
tests/server/test_api_system.py::TestCheckUpdate::test_force_update_above_threshold PASSED [ 79%]
tests/server/test_api_system.py::TestCheckUpdate::test_maintenance_mode PASSED [ 79%]
tests/server/test_api_system.py::TestCleanupExpiredJobs::test_cleanup_no_expired_jobs PASSED [ 79%]
tests/server/test_api_system.py::TestCleanupExpiredJobs::test_cleanup_refunds_expired_job PASSED [ 80%]
tests/server/test_api_system.py::TestCleanupExpiredJobs::test_cleanup_ignores_non_expired PASSED [ 80%]
tests/server/test_api_system.py::TestCleanupExpiredJobs::test_cleanup_ignores_completed_jobs PASSED [ 80%]
tests/server/test_api_system.py::TestCleanupExpiredJobs::test_cleanup_multiple_expired PASSED [ 80%]
tests/server/test_api_system.py::TestExpirePromotions::test_expire_past_end_date PASSED [ 80%]
tests/server/test_api_system.py::TestExpirePromotions::test_no_expire_future_end_date PASSED [ 80%]
tests/server/test_api_system.py::TestExpirePromotions::test_no_expire_without_end_date PASSED [ 80%]
tests/server/test_api_system.py::TestPromptManagement::test_prompt_delivered_encrypted PASSED [ 80%]
tests/server/test_api_system.py::TestPromptManagement::test_prompt_changes_by_mode PASSED [ 81%]
tests/server/test_api_system.py::TestPromptManagement::test_blacklist_delivered PASSED [ 81%]
tests/server/test_api_system.py::TestPromptManagement::test_no_app_settings_empty_config PASSED [ 81%]
tests/server/test_config.py::TestSettingsDefaults::test_default_environment PASSED [ 81%]
tests/server/test_config.py::TestSettingsDefaults::test_default_jwt_algorithm PASSED [ 81%]
tests/server/test_config.py::TestSettingsDefaults::test_default_jwt_expire_hours PASSED [ 81%]
tests/server/test_config.py::TestSettingsDefaults::test_default_app_version PASSED [ 81%]
tests/server/test_config.py::TestSettingsDefaults::test_default_exchange_rate PASSED [ 81%]
tests/server/test_config.py::TestSettingsDefaults::test_default_credit_rates PASSED [ 81%]
tests/server/test_config.py::TestSettingsDefaults::test_default_concurrency PASSED [ 82%]
tests/server/test_config.py::TestSettingsDefaults::test_default_context_cache_threshold PASSED [ 82%]
tests/server/test_config.py::TestSettingsDefaults::test_default_job_expire_hours PASSED [ 82%]
tests/server/test_config.py::TestSettingsDefaults::test_aes_key_is_64_hex_chars PASSED [ 82%]
tests/server/test_config.py::TestAdminUidList::test_empty_admin_uids_returns_empty_list PASSED [ 82%]
tests/server/test_config.py::TestAdminUidList::test_single_admin_uid PASSED [ 82%]
tests/server/test_config.py::TestAdminUidList::test_multiple_admin_uids PASSED [ 82%]
tests/server/test_config.py::TestAdminUidList::test_strips_whitespace PASSED [ 82%]
tests/server/test_config.py::TestAdminUidList::test_ignores_empty_entries PASSED [ 83%]
tests/server/test_config.py::TestAdminUidList::test_singleton_settings_exists PASSED [ 83%]
tests/server/test_dependencies.py::TestGetCurrentUser::test_valid_token_returns_user PASSED [ 83%]
tests/server/test_dependencies.py::TestGetCurrentUser::test_invalid_token_raises_401 PASSED [ 83%]
tests/server/test_dependencies.py::TestGetCurrentUser::test_token_without_sub_raises_401 PASSED [ 83%]
tests/server/test_dependencies.py::TestGetCurrentUser::test_user_not_found_raises_401 PASSED [ 83%]
tests/server/test_dependencies.py::TestGetCurrentUser::test_banned_user_raises_403 PASSED [ 83%]
tests/server/test_integration_auth.py::TestAuthAndBalanceFlow::test_register_login_and_check_balance PASSED [ 83%]
tests/server/test_integration_auth.py::TestAuthAndBalanceFlow::test_register_login_wrong_password_then_correct PASSED [ 84%]
tests/server/test_integration_auth.py::TestAuthAndBalanceFlow::test_register_login_from_different_device_blocked PASSED [ 84%]
tests/server/test_integration_auth.py::TestAuthAndBalanceFlow::test_duplicate_register_blocked PASSED [ 84%]
tests/server/test_integration_auth.py::TestAuthAndBalanceFlow::test_invalid_token_rejected_on_balance PASSED [ 84%]
tests/server/test_integration_auth.py::TestAuthAndBalanceFlow::test_no_token_rejected_on_balance PASSED [ 84%]
tests/server/test_integration_transaction.py::TestFailedAIGenerationRefund::test_full_refund_on_ai_failure PASSED [ 84%]
tests/server/test_integration_transaction.py::TestFailedAIGenerationRefund::test_refund_with_rate3_istock PASSED [ 84%]
tests/server/test_integration_transaction.py::TestFailedAIGenerationRefund::test_refund_on_client_crash_zero_processed PASSED [ 84%]
tests/server/test_integration_transaction.py::TestSuccessfulGenerationCommit::test_commit_on_full_success PASSED [ 84%]
tests/server/test_integration_transaction.py::TestSuccessfulGenerationCommit::test_commit_with_rate3_istock PASSED [ 85%]
tests/server/test_integration_transaction.py::TestPartialSuccessCommitAndRefund::test_partial_success_partial_refund PASSED [ 85%]
tests/server/test_integration_transaction.py::TestInsufficientCreditsReserve::test_reserve_rejected_balance_unchanged PASSED [ 85%]
tests/server/test_integration_transaction.py::TestDoubleFinalizeIdempotency::test_double_finalize_safe PASSED [ 85%]
tests/server/test_integration_transaction.py::TestSequentialReserveRefundCommit::test_sequential_jobs_balance_correct PASSED [ 85%]
tests/server/test_integration_transaction.py::TestAntiCheatOverclaim::test_overclaim_rejected_balance_safe PASSED [ 85%]
tests/server/test_models.py::TestRegisterRequest::test_valid_register PASSED [ 85%]
tests/server/test_models.py::TestRegisterRequest::test_invalid_email_rejects PASSED [ 85%]
tests/server/test_models.py::TestRegisterRequest::test_password_too_short_rejects PASSED [ 86%]
tests/server/test_models.py::TestRegisterRequest::test_password_too_long_rejects PASSED [ 86%]
tests/server/test_models.py::TestRegisterRequest::test_full_name_empty_rejects PASSED [ 86%]
tests/server/test_models.py::TestRegisterRequest::test_hardware_id_too_short_rejects PASSED [ 86%]
tests/server/test_models.py::TestRegisterRequest::test_hardware_id_too_long_rejects PASSED [ 86%]
tests/server/test_models.py::TestRegisterRequest::test_defaults PASSED   [ 86%]
tests/server/test_models.py::TestLoginRequest::test_valid_login PASSED   [ 86%]
tests/server/test_models.py::TestLoginRequest::test_defaults PASSED      [ 86%]
tests/server/test_models.py::TestAuthResponse::test_valid_response PASSED [ 86%]
tests/server/test_models.py::TestTopUpRequest::test_valid_topup PASSED   [ 87%]
tests/server/test_models.py::TestTopUpRequest::test_amount_zero_rejects PASSED [ 87%]
tests/server/test_models.py::TestTopUpRequest::test_amount_negative_rejects PASSED [ 87%]
tests/server/test_models.py::TestTopUpWithPromoRequest::test_valid_with_code PASSED [ 87%]
tests/server/test_models.py::TestTopUpWithPromoRequest::test_promo_code_optional PASSED [ 87%]
tests/server/test_models.py::TestReserveJobRequest::test_valid_reserve PASSED [ 87%]
tests/server/test_models.py::TestReserveJobRequest::test_file_count_zero_rejects PASSED [ 87%]
tests/server/test_models.py::TestReserveJobRequest::test_defaults PASSED [ 87%]
tests/server/test_models.py::TestFinalizeJobRequest::test_valid_finalize PASSED [ 88%]
tests/server/test_models.py::TestFinalizeJobRequest::test_defaults PASSED [ 88%]
tests/server/test_models.py::TestReserveJobResponse::test_defaults PASSED [ 88%]
tests/server/test_models.py::TestCheckUpdateResponse::test_defaults PASSED [ 88%]
tests/server/test_models.py::TestCheckUpdateResponse::test_maintenance_mode PASSED [ 88%]
tests/server/test_models.py::TestHealthResponse::test_defaults PASSED    [ 88%]
tests/server/test_models.py::TestPromoTier::test_valid_tier PASSED       [ 88%]
tests/server/test_models.py::TestPromoTier::test_max_baht_optional PASSED [ 88%]
tests/server/test_models.py::TestPromoConditions::test_minimal PASSED    [ 89%]
tests/server/test_models.py::TestPromoConditions::test_all_fields PASSED [ 89%]
tests/server/test_models.py::TestPromoReward::test_bonus_credits PASSED  [ 89%]
tests/server/test_models.py::TestPromoReward::test_rate_override PASSED  [ 89%]
tests/server/test_models.py::TestPromoReward::test_percentage_bonus PASSED [ 89%]
tests/server/test_models.py::TestPromoReward::test_tiered_bonus PASSED   [ 89%]
tests/server/test_models.py::TestCreditRatesInfo::test_defaults PASSED   [ 89%]
tests/server/test_models.py::TestBalanceWithPromosResponse::test_defaults PASSED [ 89%]
tests/server/test_promo_engine.py::TestGetExchangeRate::test_returns_firestore_rate PASSED [ 89%]
tests/server/test_promo_engine.py::TestGetExchangeRate::test_returns_fallback_on_missing PASSED [ 90%]
tests/server/test_promo_engine.py::TestGetExchangeRate::test_returns_fallback_on_exception PASSED [ 90%]
tests/server/test_promo_engine.py::TestGetExchangeRate::test_returns_fallback_on_non_numeric PASSED [ 90%]
tests/server/test_promo_engine.py::TestGetExchangeRate::test_returns_fallback_when_doc_not_exists PASSED [ 90%]
tests/server/test_promo_engine.py::TestCalculateBonus::test_bonus_credits_type PASSED [ 90%]
tests/server/test_promo_engine.py::TestCalculateBonus::test_bonus_credits_none_value PASSED [ 90%]
tests/server/test_promo_engine.py::TestCalculateBonus::test_rate_override_type PASSED [ 90%]
tests/server/test_promo_engine.py::TestCalculateBonus::test_rate_override_lower_than_base PASSED [ 90%]
tests/server/test_promo_engine.py::TestCalculateBonus::test_percentage_bonus_type PASSED [ 91%]
tests/server/test_promo_engine.py::TestCalculateBonus::test_percentage_bonus_zero PASSED [ 91%]
tests/server/test_promo_engine.py::TestCalculateBonus::test_tiered_bonus_matches_tier PASSED [ 91%]
tests/server/test_promo_engine.py::TestCalculateBonus::test_tiered_bonus_highest_tier PASSED [ 91%]
tests/server/test_promo_engine.py::TestCalculateBonus::test_tiered_bonus_no_match PASSED [ 91%]
tests/server/test_promo_engine.py::TestCalculateBonus::test_unknown_reward_type PASSED [ 91%]
tests/server/test_promo_engine.py::TestCalculateBonus::test_empty_reward PASSED [ 91%]
tests/server/test_promo_engine.py::TestCalculateBonus::test_missing_reward_key PASSED [ 91%]
tests/server/test_promo_engine.py::TestIsNewUser::test_new_user_within_7_days PASSED [ 92%]
tests/server/test_promo_engine.py::TestIsNewUser::test_old_user_beyond_7_days PASSED [ 92%]
tests/server/test_promo_engine.py::TestIsNewUser::test_exactly_7_days PASSED [ 92%]
tests/server/test_promo_engine.py::TestIsNewUser::test_no_created_at PASSED [ 92%]
tests/server/test_promo_engine.py::TestIsNewUser::test_firestore_timestamp_with_timestamp_method PASSED [ 92%]
tests/server/test_promo_engine.py::TestHasPreviousTopup::test_no_previous_topup PASSED [ 92%]
tests/server/test_promo_engine.py::TestHasPreviousTopup::test_has_previous_topup PASSED [ 92%]
tests/server/test_promo_engine.py::TestCountUserRedemptions::test_zero_redemptions PASSED [ 92%]
tests/server/test_promo_engine.py::TestCountUserRedemptions::test_multiple_redemptions PASSED [ 92%]
tests/server/test_routers_job.py::TestGetCreditRates::test_istock_mode_defaults PASSED [ 93%]
tests/server/test_routers_job.py::TestGetCreditRates::test_adobe_mode_defaults PASSED [ 93%]
tests/server/test_routers_job.py::TestGetCreditRates::test_unknown_mode_falls_back_to_istock PASSED [ 93%]
tests/server/test_routers_job.py::TestGetCreditRates::test_reads_from_firestore_when_available PASSED [ 93%]
tests/server/test_routers_job.py::TestGetCreditRates::test_firestore_exception_falls_back PASSED [ 93%]
tests/server/test_routers_job.py::TestGetCreditRates::test_case_insensitive_mode_matching PASSED [ 93%]
tests/server/test_routers_job.py::TestGetCreditRates::test_adobe_keyword_in_mode PASSED [ 93%]
tests/server/test_routers_job.py::TestGetCreditRates::test_shutterstock_keyword_in_mode PASSED [ 93%]
tests/server/test_routers_job.py::TestFinalizeRefundCalculation::test_all_success_no_refund PASSED [ 94%]
tests/server/test_routers_job.py::TestFinalizeRefundCalculation::test_all_failed_full_refund PASSED [ 94%]
tests/server/test_routers_job.py::TestFinalizeRefundCalculation::test_partial_success PASSED [ 94%]
tests/server/test_routers_job.py::TestFinalizeRefundCalculation::test_mixed_photo_video PASSED [ 94%]
tests/server/test_routers_job.py::TestFinalizeRefundCalculation::test_no_photo_video_breakdown PASSED [ 94%]
tests/server/test_routers_job.py::TestFinalizeRefundCalculation::test_refund_cannot_be_negative PASSED [ 94%]
tests/server/test_routers_job.py::TestAntiCheat::test_valid_counts PASSED [ 94%]
tests/server/test_routers_job.py::TestAntiCheat::test_exact_counts PASSED [ 94%]
tests/server/test_routers_job.py::TestAntiCheat::test_overclaim_total PASSED [ 94%]
tests/server/test_routers_job.py::TestAntiCheat::test_overclaim_success PASSED [ 95%]
tests/server/test_routers_job.py::TestAntiCheat::test_zero_counts PASSED [ 95%]
tests/server/test_routers_system.py::TestVersionLt::test_equal_versions PASSED [ 95%]
tests/server/test_routers_system.py::TestVersionLt::test_older_major PASSED [ 95%]
tests/server/test_routers_system.py::TestVersionLt::test_newer_major PASSED [ 95%]
tests/server/test_routers_system.py::TestVersionLt::test_older_minor PASSED [ 95%]
tests/server/test_routers_system.py::TestVersionLt::test_newer_minor PASSED [ 95%]
tests/server/test_routers_system.py::TestVersionLt::test_older_patch PASSED [ 95%]
tests/server/test_routers_system.py::TestVersionLt::test_newer_patch PASSED [ 96%]
tests/server/test_routers_system.py::TestVersionLt::test_complex_version PASSED [ 96%]
tests/server/test_routers_system.py::TestVersionLt::test_invalid_version_returns_false PASSED [ 96%]
tests/server/test_routers_system.py::TestVersionLt::test_different_length_versions PASSED [ 96%]
tests/server/test_routers_system.py::TestHealthEndpoint::test_health_returns_ok PASSED [ 96%]
tests/server/test_security.py::TestPasswordHashing::test_hash_returns_bcrypt_string PASSED [ 96%]
tests/server/test_security.py::TestPasswordHashing::test_hash_is_not_plaintext PASSED [ 96%]
tests/server/test_security.py::TestPasswordHashing::test_verify_correct_password PASSED [ 96%]
tests/server/test_security.py::TestPasswordHashing::test_verify_wrong_password PASSED [ 97%]
tests/server/test_security.py::TestPasswordHashing::test_verify_empty_password PASSED [ 97%]
tests/server/test_security.py::TestPasswordHashing::test_different_hashes_for_same_password PASSED [ 97%]
tests/server/test_security.py::TestJWT::test_create_and_decode_roundtrip PASSED [ 97%]
tests/server/test_security.py::TestJWT::test_token_contains_correct_claims PASSED [ 97%]
tests/server/test_security.py::TestJWT::test_token_expiry_is_in_future PASSED [ 97%]
tests/server/test_security.py::TestJWT::test_decode_invalid_token_raises PASSED [ 97%]
tests/server/test_security.py::TestJWT::test_decode_tampered_token_raises PASSED [ 97%]
tests/server/test_security.py::TestJWT::test_decode_expired_token_raises PASSED [ 97%]
tests/server/test_security.py::TestJWT::test_decode_wrong_secret_raises PASSED [ 98%]
tests/server/test_security.py::TestAES::test_encrypt_decrypt_roundtrip PASSED [ 98%]
tests/server/test_security.py::TestAES::test_encrypt_produces_hex_string PASSED [ 98%]
tests/server/test_security.py::TestAES::test_encrypt_different_each_time PASSED [ 98%]
tests/server/test_security.py::TestAES::test_decrypt_with_wrong_data_raises PASSED [ 98%]
tests/server/test_security.py::TestAES::test_roundtrip_unicode PASSED    [ 98%]
tests/server/test_security.py::TestAES::test_roundtrip_empty_string PASSED [ 98%]
tests/server/test_security.py::TestAES::test_roundtrip_long_text PASSED  [ 98%]
tests/server/test_security.py::TestAES::test_ciphertext_length_is_multiple_of_block PASSED [ 99%]
tests/server/test_transaction_consistency.py::TestAIFailureFullRefund::test_credits_never_lost_on_total_ai_failure PASSED [ 99%]
tests/server/test_transaction_consistency.py::TestClientCrashFullRefund::test_credits_restored_on_client_crash PASSED [ 99%]
tests/server/test_transaction_consistency.py::TestPartialAIFailure::test_partial_failure_correct_refund PASSED [ 99%]
tests/server/test_transaction_consistency.py::TestAllSuccessZeroRefund::test_all_success_no_credits_lost PASSED [ 99%]
tests/server/test_transaction_consistency.py::TestMixedPhotoVideoFailure::test_mixed_media_refund_consistency PASSED [ 99%]
tests/server/test_transaction_consistency.py::TestDoubleFinalize::test_double_finalize_no_double_refund PASSED [ 99%]
tests/server/test_transaction_consistency.py::TestSequentialJobs::test_sequential_jobs_balance_integrity PASSED [ 99%]
tests/server/test_transaction_consistency.py::TestExpiredJobAutoRefund::test_expired_job_credits_restored PASSED [100%]

============================= 838 passed in 32.72s =============================
